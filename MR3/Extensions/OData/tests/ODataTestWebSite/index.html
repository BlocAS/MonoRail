<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>New Web Project</title>
    <script src="datajs-1.0.2.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<body>
    <script language="JavaScript">

        function GetRepositories() {

            OData.read(
                "/models/RootModel/Repositories",
                function (data) {
                    var html = "";

                    var repos = data.results;

                    for (var i = 0; i < repos.length; i++) {
                        html += "<div>" + repos[i].Name + "</div>";
                    }

                    $("#target-element-id").html(html);
                }
            );
        }

        function GetBranch() {

        }

        function AddRepository() {
            var repoName = $("#txtRepoName").val();
            OData.defaultHandler = OData.atomHandler;
            OData.request(
              { requestUri: "/models/RootModel/Repositories",
                  method: "POST",
                  data: {
                      Id: 5,
                      Name: repoName
                  }
              },
              function (insertedItem) {
                  $("#divAddedRepo").html("<div>inserted customer ID: " + insertedItem.Id + "</div>");
              }
            );
        }
    
    </script>
    <div id="target-element-id">
    </div>
    <button id="btnGetRepos" onclick="GetRepositories()">
        Get Repositories
    </button>
    <button id="btnAddRepo" onclick="AddRepository()">
        Add Repository
    </button>
    <input id="txtRepoName" type="text" />
    <div id="divAddedRepo">
    </div>
</body>
</html>
